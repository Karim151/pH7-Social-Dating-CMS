####################
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø¢Ù…Ù†
# ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙÙŠ 2024
####################

<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        # ØªØ¹Ø·ÙŠÙ„ ØªØµÙØ­ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
        Options -MultiViews -Indexes
    </IfModule>
    Options +FollowSymLinks
    RewriteEngine On
    
    ## Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ù…Ø¬Ù„Ø¯ ÙØ±Ø¹ÙŠ (Ù…Ø«Ù„ /public_html/Ù…ÙˆÙ‚Ø¹ÙŠ/)
    # RewriteBase /Ø§Ù„Ù…Ø¬Ù„Ø¯/
</IfModule>

### ğŸ”’ ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø£Ù…Ø§Ù† ###
ServerSignature Off

<IfModule mod_headers.c>
    # Ø±Ø¤ÙˆØ³ Ø£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…Ø©
    Header always set X-XSS-Protection "1; mode=block"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set Referrer-Policy "no-referrer-when-downgrade"
    Header always set Permissions-Policy "geolocation=()"
</IfModule>

# Ù…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù…Ù„ÙØ§Øª Ø­Ø³Ø§Ø³Ø©
<FilesMatch "\.(env|log|conf|tpl|sql|md|bak)$">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
</FilesMatch>

<Files ~ "^(\.ht|\.git)">
    Require all denied
</Files>

### âš™ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ###
ErrorDocument 400 /Ø®Ø·Ø£?code=400
ErrorDocument 401 /Ø®Ø·Ø£?code=401
ErrorDocument 403 /Ø®Ø·Ø£?code=403
ErrorDocument 404 /Ø®Ø·Ø£
ErrorDocument 500 /Ø®Ø·Ø£?code=500

### âš¡ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ###
<IfModule mod_deflate.c>
    # Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª
    AddOutputFilterByType DEFLATE text/html text/css text/javascript
    AddOutputFilterByType DEFLATE application/javascript application/json
    AddOutputFilterByType DEFLATE image/svg+xml
</IfModule>

<IfModule mod_expires.c>
    # Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
    
    # Ø³Ù†Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©
    <FilesMatch "\.(ico|svg|webp|woff2)$">
        ExpiresDefault "access plus 1 year"
        Header append Cache-Control "public, immutable"
    </FilesMatch>
</IfModule>

### ğŸŒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ###
<IfModule mod_rewrite.c>
    # Ø¥Ø¬Ø¨Ø§Ø± HTTPS
    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    # Ø­Ø°Ù www Ù…Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^ https://%1%{REQUEST_URI} [R=301,L]

    # ØªÙˆØ¬ÙŠÙ‡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù…Ù„Ù Ø§Ù„Ø£Ø³Ø§Ø³
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?Ù…Ø³Ø§Ø±=$1 [L,QSA]
</IfModule>

### ğŸ›¡ï¸ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø¨ÙˆØªØ§Øª Ø§Ù„Ø¶Ø§Ø±Ø© ###
<IfModule mod_rewrite.c>
    RewriteCond %{HTTP_USER_AGENT} (AhrefsBot|SemrushBot|MJ12bot|DotBot|Barkrowler) [NC]
    RewriteRule .* - [F,L]
    
    RewriteCond %{HTTP_USER_AGENT} (archive|scan|grab|extract|leech) [NC]
    RewriteRule .* - [F,L]
</IfModule>

### ğŸ¨ Ø¯Ø¹Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ø­Ø¯ÙŠØ«Ø© ###
AddType video/mp4 .mp4
AddType video/webm .webm
AddType image/webp .webp
